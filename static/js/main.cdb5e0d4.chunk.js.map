{"version":3,"sources":["component/ImageGallery/ImageGallery.module.css","App.module.css","component/ImageGalleryItem/ImageGalleryItem.module.css","component/Modal/Modal.module.css","component/Button/Button.module.css","component/Loader/Loader.module.css","component/Button/Button.js","component/ImageGallery/ImageErrorView.js","component/ImageGalleryItem/ImageGalleryItem.js","component/Loader/Loader.js","services/imageGallery-api.js","component/ImageGallery/ImageGallery.js","component/Searchbar/Searchbar.js","component/Modal/Modal.js","App.js","index.js","component/Searchbar/Searchbar.module.css"],"names":["module","exports","Button","onClick","className","s","button","type","ImageErrorView","message","toast","error","ImageGalleryItem","webformatURL","largeImageURL","tags","imageClick","imageGalleryItem","src","data-sourse","alt","image","ImagePendingView","loader","color","height","width","stules","imageGallery","Array","fill","map","item","index","api","seaechQuerry","page","fetchGallery","name","url","this","fetch","then","responce","ok","json","Promise","reject","Error","resetPage","Status","ImageGallery","state","total","hits","status","isLoading","scrollPage","window","scrollTo","top","document","documentElement","scrollHeight","behavior","fetchApiGallery","imageName","props","setTimeout","galleryAPI","setState","catch","onLoadMore","prevProps","prevState","largeURL","text","hit","Component","Searchbar","handleNameChange","event","target","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","searchbar","searchForm","label","onChange","input","autoComplete","autoFocus","placeholder","modalRoot","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","addEventListener","removeEventListener","children","createPortal","overlay","modal","App","handleFormSubmit","toggleModal","largeImgModal","imagesClick","nodeName","dataset","sourse","app","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cdb5e0d4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__9bdhS\",\"text\":\"ImageGallery_text__1COWe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3A07g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__1X3xd\",\"image\":\"ImageGalleryItem_image__DtBfa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3lmyA\",\"modal\":\"Modal_modal__AAdpN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2zh08\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__ZDRAm\"};","import s from './Button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n","import { toast } from 'react-toastify';\n\nexport default function ImageErrorView({ message }) {\n  return toast.error(`hello${message}`);\n}\n","import s from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({\n  webformatURL = 'https://picsum.photos/600/400',\n  largeImageURL = 'https://picsum.photos/600/400',\n  tags,\n  imageClick,\n}) {\n  return (\n    <li className={s.imageGalleryItem}>\n      <img\n        src={webformatURL}\n        data-sourse={largeImageURL}\n        alt={tags}\n        className={s.image}\n        onClick={imageClick}\n      />\n    </li>\n  );\n}\n","import s from './Loader.module.css';\nimport stules from '../ImageGallery/ImageGallery.module.css';\nimport Loader from 'react-loader-spinner';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nexport default function ImagePendingView() {\n  return (\n    <>\n      <Loader\n        className={s.loader}\n        type=\"Circles\"\n        color=\"#3ccf9e\"\n        height={30}\n        width={30}\n      />\n      <>\n        <ul className={stules.imageGallery}>\n          {Array(12)\n            .fill()\n            .map((item, index) => (\n              <ImageGalleryItem key={index} />\n            ))}\n        </ul>\n      </>\n    </>\n  );\n}\n","const apiKey = '18773643-f1542c573d467a3c4fb890edb';\n\nconst api = {\n  seaechQuerry: '',\n  page: 1,\n\n  fetchGallery(name) {\n    const url = `https://pixabay.com/api/?q=${name}&page=${this.page}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n\n    return fetch(url).then(responce => {\n      this.page += 1;\n\n      if (responce.ok) {\n        return responce.json();\n      }\n      return Promise.reject(new Error(`Нет картинок по запросу ${name}`));\n    });\n  },\n  resetPage() {\n    this.page = 1;\n  },\n};\n\nexport default api;\n","import { Component } from 'react';\nimport Button from '../Button';\nimport ImageErrorView from './ImageErrorView';\nimport Loader from '../Loader';\n// import { toast } from 'react-toastify';\nimport galleryAPI from '../../services/imageGallery-api';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default class ImageGallery extends Component {\n  state = {\n    page: 1,\n    total: null,\n    hits: [],\n    error: null,\n    status: Status.IDLE,\n    isLoading: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevProps.imageName;\n    const nextName = this.props.imageName;\n    // this.scrollPage();\n    if (prevName !== nextName) {\n      this.setState({ status: Status.PENDING, hits: [], page: 1 });\n\n      this.fetchApiGallery();\n    }\n  }\n\n  scrollPage = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  fetchApiGallery = () => {\n    const { page } = this.state;\n    const { imageName } = this.props;\n    setTimeout(() => {\n      galleryAPI\n        .fetchGallery(imageName, page)\n        .then(({ hits, total }) => {\n          this.setState({\n            hits: [...this.state.hits, ...hits],\n            total,\n            isLoading: false,\n            status: Status.RESOLVED,\n          });\n          this.scrollPage();\n        })\n        .catch(error => this.setState({ error, status: Status.REJECTED }));\n    }, 2000);\n  };\n\n  onLoadMore = () => {\n    this.setState({ isLoading: true });\n    this.fetchApiGallery();\n  };\n\n  render() {\n    const { hits, error, status } = this.state;\n    const { largeURL } = this.props;\n\n    if (status === 'idle') {\n      return <div className={s.text}>Введите текст для поиска</div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ImageErrorView message={error.message} />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.imageGallery}>\n            {hits.map((hit, index) => (\n              <ImageGalleryItem\n                key={index}\n                webformatURL={hit.webformatURL}\n                largeImageURL={hit.largeImageURL}\n                tags={hit.tags}\n                imageClick={largeURL}\n              />\n            ))}\n          </ul>\n\n          {/* {(total > 11 && <Button onClick={this.onLoadMore} />)} */}\n\n          {this.state.isLoading && <Loader />}\n          {!this.state.isLoading && <Button onClick={this.onLoadMore} />}\n        </>\n      );\n    }\n  }\n}\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    imageName: '',\n  };\n  handleNameChange = event => {\n    this.setState({ imageName: event.target.value.toLowerCase() });\n  };\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.imageName.trim() === '') {\n      toast.error('Введите текст для поиска');\n      return;\n    }\n    //     onSubmit(query) {\n    // setPage(1);\n    // setImages([])\n    // setQuery(query)\n    // }\n\n    const { imageName } = this.state;\n    this.props.onSubmit(imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.searchForm}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n\n          <input\n            value={this.state.imageName}\n            onChange={this.handleNameChange}\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { children } = this.props;\n\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>{children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\nimport './App.module.css';\nimport s from './App.module.css';\nimport ImageGallery from './component/ImageGallery';\nimport Searchbar from './component/Searchbar';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Modal from './component/Modal/';\nimport galleryAPI from './services/imageGallery-api';\n\nexport default class App extends Component {\n  state = {\n    imageName: '',\n    largeImageURL: '',\n  };\n\n  handleFormSubmit = imageName => {\n    galleryAPI.resetPage();\n\n    this.setState({ imageName });\n  };\n  toggleModal = () => {\n    this.setState({ largeImageURL: '' });\n  };\n\n  largeImgModal = event => {\n    const imagesClick = event.target;\n\n    if (imagesClick.nodeName !== 'IMG') {\n      return;\n    }\n\n    const largeURL = imagesClick.dataset.sourse;\n    this.setState(({ largeImageURL }) => ({\n      largeImageURL: largeURL,\n    }));\n  };\n\n  render() {\n    const { largeImageURL, imageName } = this.state;\n\n    return (\n      <div className={s.app}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n\n        <ImageGallery imageName={imageName} largeURL={this.largeImgModal} />\n        {largeImageURL && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt={imageName} />\n          </Modal>\n        )}\n        {}\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__LTx6x\",\"searchForm\":\"Searchbar_searchForm__37edr\",\"button\":\"Searchbar_button__1kIEH\",\"label\":\"Searchbar_label__22Yjz\",\"input\":\"Searchbar_input__20GzX\"};"],"sourceRoot":""}